(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e7ecc13"],{"3c43":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!==typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"3e8f":function(e,t){},5118:function(e,t,n){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},"5a5d":function(e,t,n){"use strict";var i=n("c69b"),a=n.n(i);a.a},"5d6b":function(e,t,n){var i=n("e53d").parseInt,a=n("a1ce").trim,o=n("e692"),s=/^[-+]?0[xX]/;e.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var n=a(String(e),3);return i(n,t>>>0||(s.test(n)?16:10))}:i},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var i,a=1,o={},s=!1,r=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?f():m()?h():e.MessageChannel?g():r&&"onreadystatechange"in r.createElement("script")?v():w(),l.setImmediate=u,l.clearImmediate=c}function u(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return o[a]=s,i(a),a++}function c(e){delete o[e]}function d(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i);break}}function p(e){if(s)setTimeout(p,0,e);else{var t=o[e];if(t){s=!0;try{d(t)}finally{c(e),s=!1}}}}function f(){i=function(e){t.nextTick(function(){p(e)})}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function h(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&p(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;p(t)},i=function(t){e.port2.postMessage(t)}}function v(){var e=r.documentElement;i=function(t){var n=r.createElement("script");n.onreadystatechange=function(){p(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function w(){i=function(e){setTimeout(p,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("4362"))},7445:function(e,t,n){var i=n("63b6"),a=n("5d6b");i(i.G+i.F*(parseInt!=a),{parseInt:a})},b9e9:function(e,t,n){n("7445"),e.exports=n("584a").parseInt},c69b:function(e,t,n){},d8ee:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Input",{staticStyle:{width:"200px","margin-bottom":"10px"},attrs:{icon:"ios-search-outline",placeholder:"请输入关键字"},on:{"on-enter":e.searchUser,"on-click":e.searchUser},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),n("Table",{attrs:{columns:e.tableTitle,data:e.tableData,loading:e.tableLoading}}),n("div",{staticClass:"pagebox"},[n("Page",{attrs:{total:e.total,current:e.currentPage,"page-size":e.pageSize,"show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}}),n("span",{staticStyle:{float:"left","margin-left":"185px","margin-top":"-20px"}},[e._v("共"+e._s(e.total)+"个题目")])],1),n("Modal",{attrs:{title:"编辑题目",loading:e.loading},on:{"on-ok":e.clickSure},model:{value:e.showEditQues,callback:function(t){e.showEditQues=t},expression:"showEditQues"}},[n("div",{staticStyle:{padding:"0 5px"}},[n("p",{staticClass:"item_text"},[e._v("题目描述")]),n("Input",{model:{value:e.quesObj.memo,callback:function(t){e.$set(e.quesObj,"memo",t)},expression:"quesObj.memo"}}),n("p",{staticClass:"item_text"},[e._v("问题类型")]),n("Select",{staticStyle:{width:"160px"},on:{"on-change":e.changeOption},model:{value:e.quesObj.qtype,callback:function(t){e.$set(e.quesObj,"qtype",t)},expression:"quesObj.qtype"}},e._l(e.quesTypeArr,function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1),e.showAnswerInput?n("div",[n("p",{staticClass:"item_text"},[e._v("答案")]),n("Input",{model:{value:e.quesObj.answer,callback:function(t){e.$set(e.quesObj,"answer",t)},expression:"quesObj.answer"}})],1):e._e(),n("p",{staticClass:"item_text"},[e._v("上传图片")]),e._l(e.imgList,function(t,i){return n("div",{key:i,staticClass:"demo-upload-list"},["finished"===t.status?[n("img",{attrs:{src:t.url}}),n("div",{staticClass:"demo-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(n){return e.handleView(t.name)}}}),n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(n){return e.handleRemove(t)}}})],1)]:[t.showProgress?n("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),n("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":e.handleSuccess,"default-file-list":e.defaultList,format:["jpg"],"max-size":1024,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,data:e.myparams,multiple:"",type:"drag",action:e.uploadImgUrl}},[n("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[n("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),n("p",{staticClass:"item_text"},[e._v("上传音频")]),n("Upload",{ref:"uploadMp3",attrs:{action:e.uploadMp3Url,format:["mp3"],"max-size":8192,"on-format-error":e.handleFormatMp3,"on-exceeded-size":e.handleMaxSizeMp3,"on-success":e.handleSuccessMp3,"on-remove":e.handleRemoveMp3,data:e.myparams,"default-file-list":e.defaultListofMp3,"show-upload-list":!0,"before-upload":e.handleBeforeUploadMp3,"on-preview":e.linkToMp3}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传音频")])],1),n("p",{staticClass:"item_text"},[e._v("上传视频")]),n("Upload",{ref:"uploadMp4",attrs:{action:e.uploadMp4Url,format:["mp4"],"max-size":8092,"on-format-error":e.handleFormatMp4,"on-exceeded-size":e.handleMaxSizeMp4,"on-success":e.handleSuccessMp4,"on-remove":e.handleRemoveMp4,data:e.myparams,"default-file-list":e.defaultListofMp4,"show-upload-list":!0,"before-upload":e.handleBeforeUploadMp4,"on-preview":e.linkToMp4}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传视频")])],1)],2)])],1)},a=[],o=(n("7f7f"),n("ac6a"),n("e814")),s=n.n(o),r=n("bc3a"),l=n.n(r),u=n("69d9"),c=n("5118"),d=(n("3c43"),n("3e8f"),{data:function(){var e=this;return{tableTitle:[{key:"num",title:"序号",width:80},{key:"memo",title:"题目",width:400,ellipsis:!0,tooltip:!0},{key:"answer",title:"答案",width:400,ellipsis:!0,tooltip:!0},{key:"action",title:"操作",render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.defaultListofMp3=[],e.defaultListofMp4=[],e.defaultList=[],e.showEditQues=!0,e.currentIndex=n.row.num-1,e.quesObj=n.row,"0"==e.quesObj.qtype||"5"==e.quesObj.qtype?e.showAnswerInput=!1:e.showAnswerInput=!0,e.myparams.questionid=n.row.questionid,e.myparams.openid=e.openid;var t=n.row.pics.map(function(e,t){return{name:e.picid,url:e.url}});Object(c["setTimeout"])(function(){e.defaultList=t,e.$nextTick(function(){e.imgList=e.$refs.upload.fileList})},100);var i=[];if(i.push(n.row),"1"==n.row.media){var a=i.map(function(e,t){if(e.url)return{name:"试听.mp3",url:e.url}});void 0!=a[0]&&Object(c["setTimeout"])(function(){e.defaultListofMp3=a,e.$nextTick(function(){})},100)}else if("2"==n.row.media){var o=i.map(function(e,t){if(e.url)return{name:"试看.mp4",url:e.url}});void 0!=o[0]&&Object(c["setTimeout"])(function(){e.defaultListofMp4=o,e.$nextTick(function(){})},1e3)}}}},"编辑")])}}],tableData:[],tableLoading:!1,currentPage:1,pageSize:10,total:null,showEditQues:!1,keyword:"",quesTypeArr:u["questionType"],quesObj:{questionid:"",memo:"",qtype:"",pics:[],url:"",answer:""},imgList:[],defaultList:[],defaultListofMp3:[],defaultListofMp4:[],myparams:{},myparamsOfMp3:{},myparamsOfvideo:{},uploadImgUrl:u["serverUrl"]+"/api/pcuploadquestionpic.php",uploadMp3Url:u["serverUrl"]+"/api/pcuploadquestionaudio.php",uploadMp4Url:u["serverUrl"]+"/api/pcuploadquestionvideo.php",currentIndex:0,showAnswerInput:!1,loading:!0}},created:function(){this.fetchData()},mounted:function(){this.imgList=this.$refs.upload.fileList},computed:{openid:function(){return this.$store.state.user.userId},token:function(){return this.$store.state.user.token}},methods:{searchUser:function(){this.currentPage=1,this.fetchData()},fetchData:function(){var e=this;this.tableLoading=!0,l.a.post(u["serverUrl"]+"/api/pcindex.php?act=getSysQuestionList",{uid:this.openid,token:this.token,currentpage:this.currentPage-1,pagesize:this.pageSize,keyword:this.keyword}).then(function(t){console.log(t.data),e.total=s()(t.data.count);var n=t.data.list;n.forEach(function(t,n){t.num=(e.currentPage-1)*e.pageSize+n+1}),e.tableData=n,e.tableLoading=!1})},handleSuccess:function(e,t){t.url=e.url,t.name=t.name;var n={displayorder:"0",picid:e.picid,url:t.url};this.tableData[this.currentIndex].pics.push(n)},handleRemove:function(e){var t=this;this.$Modal.confirm({title:"删除确认",content:"确认删除该图片吗？",onOk:function(){var n=t.$refs.upload.fileList,i=n.indexOf(e);t.$refs.upload.fileList.splice(n.indexOf(e),1),t.tableData[t.currentIndex].pics.splice(i,1),l.a.post(u["serverUrl"]+"/api/pcindex.php?act=delSysQuestionPicById",{picid:e.name,openid:t.openid}).then(function(e){e&&console.log(e.data)})},onCancel:function(){}})},handleFormatError:function(e){this.$Notice.warning({title:"图片格式错误",desc:"请上传jpg格式的图片！"})},handleMaxSize:function(e){this.$Notice.warning({title:"图片大小超出限制",desc:"图片大小不能超过1M!"})},handleBeforeUpload:function(e){var t=this.imgList.length<5;return t||this.$Notice.warning({title:"最多只能上传5张图片！"}),t},handleFormatMp3:function(e){this.$Notice.warning({title:"文件格式错误",desc:"请上传mp3格式！"})},handleSuccessMp3:function(e,t){console.log(e),console.log(t),t.url=e.files.file.url,t.name="试听.mp3",this.tableData[this.currentIndex].media=e.files.file.media,this.tableData[this.currentIndex].url=e.files.file.url,this.$Message.info("音频上传成功")},handleBeforeUploadMp3:function(){this.$refs.uploadMp3.fileList&&this.$refs.uploadMp3.fileList.shift()},handleRemoveMp3:function(e){var t=this;console.log(e),console.log(this.defaultListofMp3),console.log(this.myparams.questionid),this.$Modal.confirm({title:"音频删除",content:"确认删除该音频吗？",onOk:function(){l.a.post("/api/pcindex.php?act=delQuestionMp3ById",{uid:t.openid,questionid:t.myparams.questionid,url:e.url}).then(function(e){e&&(console.log(e.data),console.log("删除成功"),t.tableData[t.currentIndex].media="0",t.tableData[t.currentIndex].url="",t.defaultListofMp3.name="",t.defaultListofMp3.url="")})},onCancel:function(){}})},handleMaxSizeMp3:function(e){console.log(e),this.$Notice.warning({title:"音频大小超出限制",desc:"请上传小于8M的音频！"})},linkToMp3:function(e){window.open(e.url,"_blank")},handleFormatMp4:function(e){this.$Notice.warning({title:"文件格式错误",desc:"请上传mp4格式！"})},handleMaxSizeMp4:function(e){console.log(e),this.$Notice.warning({title:"视频大小超出限制",desc:"请上传小于8M的视频！"})},handleSuccessMp4:function(e,t){console.log(e),console.log(t),t.url=e.files.file.url,t.name="试看.mp4",this.tableData[this.currentIndex].media=e.files.file.media,this.tableData[this.currentIndex].url=e.files.file.url,this.$Message.info("视频上传成功")},handleBeforeUploadMp4:function(){this.$refs.uploadMp4.fileList&&this.$refs.uploadMp4.fileList.shift()},handleRemoveMp4:function(e){var t=this;console.log(this.defaultListofMp4),this.$Modal.confirm({title:"视频删除",content:"确认删除该视频吗？",onOk:function(){l.a.post("/api/pcindex.php?act=delQuestionMp4ById",{uid:t.openid,questionid:t.myparams.questionid,url:e.url}).then(function(e){e&&(console.log(e.data),console.log("删除成功"),t.tableData[t.currentIndex].media="0",t.tableData[t.currentIndex].url="",t.defaultListofMp4.name="",t.defaultListofMp4.url="")})},onCancel:function(){}})},linkToMp4:function(e){window.open(e.url,"_blank")},clickSure:function(){var e=this,t={memo:this.quesObj.memo,qid:this.quesObj.questionid,index:this.quesObj.qtype,answer:this.quesObj.answer};""==t.memo?(this.$Message.error("*星号为必填项！"),Object(c["setTimeout"])(function(){e.loading=!1,e.$nextTick(function(){e.loading=!0})},500)):(console.log(t),"0"==t.index||"5"==t.index?(l.a.post(u["serverUrl"]+"/api/pcindex.php?act=newQuestion",{questiondata:t,openid:this.openid}).then(function(t){t.data.status&&(e.$Message.success("保存成功!"),e.loading=!1,e.showEditQues=!1)}),this.loading=!0):""==t.answer?(this.$Message.error("答案不能为空！"),Object(c["setTimeout"])(function(){e.loading=!1,e.$nextTick(function(){e.loading=!0})},100)):(l.a.post(u["serverUrl"]+"/api/pcindex.php?act=newQuestion",{questiondata:t,openid:this.openid}).then(function(t){t.data.status&&(e.$Message.success("保存成功!"),e.loading=!1,e.showEditQues=!1)}),this.loading=!0))},changeOption:function(e){"0"==this.quesObj.qtype||"5"==this.quesObj.qtype?(this.showAnswerInput=!1,this.quesObj.answer=""):this.showAnswerInput=!0},pageChange:function(e){this.currentPage=e,this.fetchData()},pageSizeChange:function(e){this.pageSize=e,this.fetchData()}}}),p=d,f=(n("5a5d"),n("2877")),m=Object(f["a"])(p,i,a,!1,null,null,null);t["default"]=m.exports},e814:function(e,t,n){e.exports=n("b9e9")}}]);