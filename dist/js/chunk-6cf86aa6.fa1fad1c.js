(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cf86aa6"],{"7edb":function(t,e,a){},"960c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"citypartner"},[a("div",{staticStyle:{"margin-bottom":"15px"}},[a("Select",{staticStyle:{width:"100px"},on:{"on-change":t.changeFilter},model:{value:t.filterSelect,callback:function(e){t.filterSelect=e},expression:"filterSelect"}},t._l(t.filterList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("Table",{attrs:{columns:t.tableTitle,data:t.tableData,loading:t.tableLoading}}),a("Modal",{attrs:{title:"申请详情",loading:t.loading},on:{"on-ok":t.sure,"on-cancel":t.cancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"divbox"},[a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v("公司名称 : ")]),t._v(" "+t._s(t.rowObj.company)+"\n        ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v("所在区域 : ")]),t._v(" "+t._s(t.rowObj.city)+"\n        ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v("详细地址 : ")]),t._v(" "+t._s(t.rowObj.address)+"\n        ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v("机构代码 : ")]),t._v("  "+t._s(t.rowObj.orgcode)+"\n        ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v("公司法人 : ")]),t._v(" "+t._s(t.rowObj.corporate)+"\n        ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v("联系电话 : ")]),t._v("  "+t._s(t.rowObj.tel)+"\n        ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[t._v(" 申请时间 : ")]),t._v(" "+t._s(t.rowObj.date)+"\n        ")]),a("div",{staticClass:"item clearfix"},[a("span",{staticClass:"fl itemtext"},[t._v("营业执照 : ")]),a("div",{staticClass:"picbox fl"},[a("img",{staticClass:"pic",attrs:{src:t.rowObj.pic,alt:""}})]),a("span",{staticClass:"bigImage",on:{click:t.bigImage}},[t._v("大图")])]),a("div",{staticClass:"item"},[a("span",{staticClass:"itemtext"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 审核意见:")]),0==t.already?a("RadioGroup",{on:{"on-change":t.ifTextarea},model:{value:t.choose,callback:function(e){t.choose=e},expression:"choose"}},[a("Radio",{attrs:{label:"pass"}},[t._v("通过")]),a("Radio",{attrs:{label:"reject"}},[t._v("驳回")])],1):t._e(),t.already?a("span",[t._v(t._s(t.auditMessage)+" ")]):t._e(),t.showTextarea?a("div",{staticStyle:{margin:"20px 0 0 70px"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:"驳回理由"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1):t._e()],1)])]),a("Modal",{staticStyle:{width:"300px"},attrs:{title:"营业执照"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:t.rowObj.pic}}):t._e()])],1)},s=[],l=(a("ac6a"),a("bc3a")),o=a.n(l),n=a("69d9"),c={data:function(){var t=this;return{tableTitle:[{key:"num",title:"序号",width:60},{key:"company",title:"公司名称",width:240,align:"center",ellipsis:!0,tooltip:!0},{key:"city",title:"所在区域",width:160,align:"center",ellipsis:!0,tooltip:!0},{key:"address",title:"详细地址",ellipsis:!0,tooltip:!0},{key:"orgcode",title:"机构代码",ellipsis:!0,tooltip:!0},{key:"corporate",title:"公司法人"},{key:"tel",title:"联系电话"},{key:"date",title:"申请时间"},{key:"action",title:"操作",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modal=!0,t.rowObj=a.row,-1==a.row.status?(t.already=!0,t.auditMessage="已驳回. 理由："+a.row.reason):1==a.row.status?(t.already=!0,t.auditMessage="已通过"):t.already=!1}}},"查看")])}}],tableData:[],tableLoading:!1,modal:!1,rowObj:{},reason:"",choose:"",showTextarea:!1,visible:!1,loading:!0,already:!1,auditMessage:"",filterSelect:"0",filterList:[{value:"0",label:"待审核"},{value:"1",label:"已通过"},{value:"-1",label:"已驳回"}]}},created:function(){this.fetchData()},computed:{openid:function(){return this.$store.state.user.userId},token:function(){return this.$store.state.user.token}},methods:{fetchData:function(){var t=this;this.tableLoading=!0,o.a.post(n["serverUrl"]+"/api/pcindex.php?act=getAgentApplyList",{openid:this.openid,token:this.token,status:this.filterSelect}).then(function(e){if(console.log(e.data),e.data){var a=e.data;a.forEach(function(t,e){t.num=e+1}),t.tableData=a,t.tableLoading=!1}})},sure:function(){var t=this;if(this.already)this.loading=!1;else if(""!=this.choose){var e="pass"==this.choose?1:-1;if("reject"==this.choose&&""==this.reason)this.$Modal.error({title:"错误",content:"请填写驳回理由！"}),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3);else{var a="reject"==this.choose?this.reason:"",i={openid:this.openid,token:this.token,id:this.rowObj.id,status:e,reason:a};o.a.post(n["serverUrl"]+"/api/pcindex.php?act=updateAgentApply",i).then(function(e){console.log(e.data),e.data&&(t.modal=!1,t.loading=!1)}),this.fetchData()}}else this.$Modal.error({title:"错误",content:"请填写审核意见！"}),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)},cancel:function(){this.modal=!1},ifTextarea:function(){"pass"==this.choose?this.showTextarea=!1:"reject"==this.choose&&(this.showTextarea=!0)},bigImage:function(){this.visible=!0},changeFilter:function(){this.fetchData()}}},r=c,d=(a("ad0e"),a("2877")),p=Object(d["a"])(r,i,s,!1,null,null,null);e["default"]=p.exports},ad0e:function(t,e,a){"use strict";var i=a("7edb"),s=a.n(i);s.a}}]);